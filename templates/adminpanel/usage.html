{% extends "adminpanel/base_admin.html" %}
{% block title %}Usage Logs - Admin - TLE AI{% endblock %}

{% block admin_content %}
<h1 class="text-2xl font-bold text-gray-800 mb-6">Usage Logs</h1>
<div class="card overflow-hidden">
    <table class="data-table">
        <thead>
            <tr>
                <th>User</th>
                <th>Query</th>
                <th>Input Tokens</th>
                <th>Output Tokens</th>
                <th>Total Tokens</th>
                <th>Cost</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody>
            {% for log in logs %}
            <tr>
                <td class="text-gray-600">{{ log.user.email }}</td>
                <td class="text-gray-700 truncate max-w-xs">{{ log.query_text|truncatewords:15 }}</td>
                <td class="text-gray-600">{{ log.input_tokens|default:"—" }}</td>
                <td class="text-gray-600">{{ log.output_tokens|default:"—" }}</td>
                <td class="text-gray-600 font-medium">{{ log.input_tokens|add:log.output_tokens }}</td>
                <td class="text-green-600 font-medium">${{ log.cost|floatformat:6 }}</td>
                <td class="text-gray-500">{{ log.created_at|timesince }} ago</td>
            </tr>
            {% empty %}
            <tr><td colspan="7" class="px-4 py-8 text-center text-gray-400">No usage logs yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
